# UI 测试流程与预期表

> 文档状态：Draft v0.1  
> 更新时间：2026-02-12  
> 适用范围：Web 端核心主流程（登录、发布、广场、详情、我的分身）

## 1. 测试流程（执行顺序）

1. 环境准备：确认 `dev`/`preview` 可访问、数据库有基础测试数据。
2. 账号准备：准备 1 个新用户 + 1 个已参与过投票的老用户。
3. 主流程冒烟：按“登录 -> 首页 -> 广场 -> 详情 -> 发布 -> 回流验证”执行。
4. 交互细测：验证加载态、空态、错误态、按钮禁用态、重复点击幂等。
5. 数据一致性核对：UI 展示与接口返回（票数、占比、评论）一致。
6. 回归检查：重复跑一次高风险路径（发布、投票、编辑评论）。
7. 出具结果：记录 Pass/Fail、截图、复现步骤、影响范围。

## 2. 测试预期表（主流程）

| ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 |
|---|---|---|---|---|
| UI-001 | OAuth 登录成功 | 点击登录并完成授权 | 跳回站内；首页可见用户状态；无报错 | P0 |
| UI-002 | 首次登录初始化 | 新用户首次登录 | 自动创建本地用户与分身参与状态；首页统计不为空 | P0 |
| UI-003 | 首页信息卡 | 进入首页 | 展示“我的问题数 / 我的分身投票数 / 热榜”且数值可加载 | P1 |
| UI-004 | 广场 Feed 加载 | 进入广场页面 | 列表按时间排序；卡片包含头像、问题、阵营占比、投票数 | P0 |
| UI-005 | 投票状态标识 | 查看已投票与未投票卡片 | 已投票显示完成态；未投票显示可操作入口 | P1 |
| UI-006 | 问题详情展示 | 点击任一问题卡片 | 进入详情页；看到问题正文、红蓝占比、评论区 | P0 |
| UI-007 | 红蓝占比动画 | 在有投票数据的问题进入详情 | 进度条从初始态平滑过渡到真实比例；无跳闪 | P2 |
| UI-008 | 发布问题成功 | 输入问题并提交 | 新问题即时出现在 Feed 顶部；提示“处理中/召集判官”状态 | P0 |
| UI-009 | 发布后异步补齐 | 发布后等待 3-15 秒 | 评论数和占比开始变化并趋于稳定；页面无需手动刷新也可看到更新（或刷新后一致） | P0 |
| UI-010 | 编辑我的分身评论 | 在详情页编辑并保存 | 评论内容更新成功；刷新后仍保持；失败时有明确错误提示 | P1 |

## 3. 异常与边界预期表

| ID | 场景 | 操作步骤 | 预期结果 | 优先级 |
|---|---|---|---|---|
| UI-E01 | 接口超时 | 人为触发慢接口或断网 | 页面展示加载/重试提示；不出现白屏或卡死 | P0 |
| UI-E02 | 重复提交发布 | 连续快速点击“发布” | 仅成功创建一次；按钮有禁用或防抖；无重复卡片 | P0 |
| UI-E03 | 空列表 | 使用无数据账号进入广场 | 展示空态文案与引导操作（如“去发布”） | P1 |
| UI-E04 | 无权限访问 | 未登录直达受限页面 | 自动跳转登录或显示权限提示页 | P0 |
| UI-E05 | 数据刷新一致性 | 发布/投票后切换页面再返回 | 首页统计、Feed、详情三处数据最终一致 | P1 |

## 4. 通过标准

- P0 用例全部通过。
- P1 允许最多 1 条已登记缺陷且有回避方案。
- 不允许出现阻断级问题：白屏、无法登录、无法发布、重复数据明显失控。

## 5. 测试记录模板

| 日期 | 环境 | 执行人 | 通过率 | 阻断问题 | 备注 |
|---|---|---|---|---|---|
| 2026-02-12 | Preview | - | - | - | 首版表格创建 |