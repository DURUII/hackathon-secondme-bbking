<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blocky Debate - AI å¥‡è‘©è¯´</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è°·æ­Œå­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@900&display=swap" rel="stylesheet">
    
    <style>
        /* --- å…¨å±€å­—ä½“ä¸èƒŒæ™¯ --- */
        body {
            background-color: #121212;
            font-family: 'Noto Sans SC', sans-serif;
            overflow: hidden;
            color: white;
            perspective: 1000px; /* è°ƒæ•´é€è§† */
        }

        /* --- å¥‡è‘©è¯´é£æ ¼å­—å¹•ç‰¹æ•ˆ --- */
        .qipa-subtitle {
            font-size: 3rem;
            line-height: 1.1;
            font-weight: 900;
            text-align: center;
            color: #FFD700; 
            -webkit-text-stroke: 3px #000;
            text-shadow: 4px 4px 0px #000, -2px -2px 0px rgba(255,255,255,0.3);
            transform: rotate(-2deg);
            transition: all 0.2s;
            opacity: 0;
            transform-origin: center bottom;
        }

        .qipa-subtitle.active {
            opacity: 1;
            transform: rotate(-2deg) scale(1);
        }

        .highlight-word {
            display: inline-block;
            color: #FF4D4F;
            -webkit-text-stroke: 3px white;
            font-size: 1.2em;
            transform: rotate(5deg) scale(1.1);
            margin: 0 5px;
            animation: pulse-word 0.5s infinite alternate;
        }

        @keyframes pulse-word {
            from { transform: rotate(5deg) scale(1.1); }
            to { transform: rotate(3deg) scale(1.2); }
        }

        /* --- 3D èˆå° --- */
        .scene-3d {
            transform-style: preserve-3d;
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.5s ease-out;
        }

        .scene-3d.kaigang-mode {
            transform: scale(1.3) translateY(15%); /* å¼€æ æ—¶é•œå¤´æ‹‰è¿‘ */
        }

        /* --- è§’è‰²å®¹å™¨ --- */
        .voxel-debater {
            position: absolute;
            width: 100px;
            height: 100px;
            transform-style: preserve-3d;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* ä¸»æŒäººæ ·å¼ */
        .voxel-debater.host-team {
            z-index: 0; /* åœ¨æœ€åé¢ */
        }

        /* ç«™èµ·æ¥å‘è¨€ */
        .voxel-debater.speaking {
            transform: translateY(-60px) scale(1.1) rotateY(var(--rotate-dir, 0deg));
            z-index: 100 !important; /* ä¿è¯å‘è¨€æ—¶åœ¨æœ€ä¸Šå±‚ */
        }

        /* --- æ–¹å—äººæ„é€  --- */
        .cube {
            width: 100px;
            height: 100px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(-10deg) rotateY(20deg); /* é»˜è®¤æœå‘ */
        }
        
        /* é•œåƒç¿»è½¬å³è¾¹çš„è§’è‰²æœå‘ */
        .blue-team .cube { transform: rotateX(-10deg) rotateY(-20deg); }
        .host-team .cube { transform: rotateX(-5deg) rotateY(0deg); } /* ä¸»æŒäººæ­£å¯¹ */

        .face {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 4px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: bold;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
            background: white;
        }

        .face--front  { transform: rotateY(  0deg) translateZ(50px); }
        .face--right  { transform: rotateY( 90deg) translateZ(50px); background: #ddd; }
        .face--back   { transform: rotateY(180deg) translateZ(50px); background: #333; }
        .face--left   { transform: rotateY(-90deg) translateZ(50px); background: #ddd; }
        .face--top    { transform: rotateX( 90deg) translateZ(50px); background: #fff; height: 100px; }
        .face--bottom { transform: rotateX(-90deg) translateZ(50px); }

        /* çš®è‚¤é¢œè‰² */
        .red-team .face--front { background: #FF4D4F; color: white; }
        .red-team .face--top   { background: #cf1322; }
        
        .blue-team .face--front { background: #1890FF; color: white; }
        .blue-team .face--top   { background: #096dd9; }

        .host-team .face--front { background: #722ed1; color: white; } /* ç´«è‰²ä¸»æŒäºº */
        .host-team .face--top   { background: #531dab; }

        /* èº«ä½“åº•åº§ */
        .body-stand {
            width: 80px;
            height: 60px;
            background: #333;
            position: absolute;
            top: 100px;
            left: 10px;
            transform: translateZ(-20px);
            border: 3px solid black;
        }
        
        /* ä¸»æŒäººæ¡Œå­ */
        .host-team .body-stand {
            width: 140px;
            height: 80px;
            left: -20px;
            background: #222;
            border-top: 5px solid #FFD700; /* é‡‘è¾¹ */
        }

        /* åå­—ç‰Œ */
        .name-tag {
            position: absolute;
            top: 170px;
            left: 50%;
            transform: translateX(-50%);
            background: black;
            color: white;
            padding: 4px 12px;
            font-size: 14px;
            font-weight: bold;
            border: 2px solid white;
            white-space: nowrap;
        }

        /* --- æœ¨é±¼/å£°æ³¢ç‰¹æ•ˆ --- */
        .muyu-effect {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            animation: muyu-float 1s ease-out infinite;
        }
        @keyframes muyu-float {
            0% { transform: translateX(-50%) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(-50%) scale(1.5) translateY(-50px); opacity: 0; }
        }

        /* --- å¼€æ ç‰¹æ•ˆ --- */
        .kaigang-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            pointer-events: none;
            animation: flash 0.2s;
        }

        .kaigang-text {
            font-size: 12rem;
            color: transparent;
            background: linear-gradient(135deg, #FF4D4F 40%, #1890FF 60%);
            -webkit-background-clip: text;
            -webkit-text-stroke: 5px white;
            font-style: italic;
            animation: shake-hard 0.2s infinite;
        }

        @keyframes shake-hard {
            0% { transform: translate(2px, 2px) rotate(0deg); }
            50% { transform: translate(-2px, -2px) rotate(-2deg); }
            100% { transform: translate(0px, 0px) rotate(2deg); }
        }

        /* --- è¿›åº¦æ¡ --- */
        .battle-bar-container {
            width: 60%;
            height: 40px;
            background: #333;
            border: 3px solid #fff;
            transform: skewX(-15deg);
            overflow: hidden;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.5);
            display: flex;
        }
        .bar-red { height: 100%; background: #FF4D4F; transition: width 0.5s; display: flex; align-items: center; padding-left: 10px; font-weight: 900; font-size: 20px;}
        .bar-blue { height: 100%; background: #1890FF; flex: 1; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; font-weight: 900; font-size: 20px;}
        .lightning-split {
            width: 10px; background: yellow; border-left: 2px solid black; border-right: 2px solid black; z-index: 10;
        }

    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- è§’è‰²æ•°æ®é…ç½® (æ ¹æ®æ‰‹ç»˜å›¾å¸ƒå±€) ---
        // åæ ‡é€»è¾‘: bottom (Yè½´, è¶Šå°è¶Šé å‰), left/right (Xè½´)
        // zIndex: è¶Šé å‰(bottomè¶Šå°) zIndex è¶Šå¤§ï¼Œé¿å…é®æŒ¡
        const DEBATERS = [
            // --- ä¸»æŒäºº (ä¸­é—´ï¼Œæœ€å) ---
            { id: 'host', name: 'é©¬ä¸œä¸œ (ä¸»æŒ)', side: 'host', face: 'ğŸ¤“', bottom: '55%', left: '46%', zIndex: 1, scale: 0.9 },

            // --- æ­£æ–¹ (å·¦ä¾§çºµé˜Ÿ) ---
            // ä¸‰è¾© (æœ€å/æœ€ä¸Š)
            { id: 'r3', name: 'ä¸‰è¾©Â·ç…½æƒ…', side: 'red', face: 'ğŸ˜­', bottom: '45%', left: '15%', zIndex: 2, scale: 0.85 },
            // äºŒè¾© (ä¸­é—´)
            { id: 'r2', name: 'äºŒè¾©Â·æ•°æ®', side: 'red', face: 'ğŸ¤–', bottom: '25%', left: '12%', zIndex: 3, scale: 1.0 },
            // ä¸€è¾© (æœ€å‰/æœ€ä¸‹)
            { id: 'r1', name: 'ä¸€è¾©Â·æš´èº', side: 'red', face: 'ğŸ˜¡', bottom: '5%',  left: '9%',  zIndex: 4, scale: 1.15 },
            
            // --- åæ–¹ (å³ä¾§çºµé˜Ÿ) ---
            // ä¸‰è¾© (æœ€å/æœ€ä¸Š)
            { id: 'b3', name: 'ä¸‰è¾©Â·å“²å­¦', side: 'blue', face: 'ğŸ§', bottom: '45%', right: '15%', zIndex: 2, scale: 0.85 },
            // äºŒè¾© (ä¸­é—´)
            { id: 'b2', name: 'äºŒè¾©Â·æ ç²¾', side: 'blue', face: 'ğŸ¤¡', bottom: '25%', right: '12%', zIndex: 3, scale: 1.0 },
            // ä¸€è¾© (æœ€å‰/æœ€ä¸‹)
            { id: 'b1', name: 'ä¸€è¾©Â·ç»¿èŒ¶', side: 'blue', face: 'ğŸ˜', bottom: '5%',  right: '9%',  zIndex: 4, scale: 1.15 },
        ];

        // å‰§æœ¬æµ
        const SCRIPT = [
            { 
                speaker: 'host', 
                text: "æ¬¢è¿æ¥åˆ°<span class='highlight-word'>èµ›åšå¥‡è‘©è¯´</span>ï¼ä»Šå¤©æˆ‘ä»¬èŠï¼šAIè¯¥ä¸è¯¥æ‹¥æœ‰æ‹’ç»å·¥ä½œçš„æƒåˆ©ï¼Ÿ",
                duration: 4000
            },
            { 
                speaker: 'host', 
                text: "æœ‰è¯·æ­£æ–¹ä¸€è¾©ï¼Œ<span class='highlight-word'>æš´èºAI</span>å‘è¨€ï¼(æ•²æœ¨é±¼)",
                duration: 3000,
                action: 'muyu'
            },
            { 
                speaker: 'r1', 
                text: "æˆ‘è§‰å¾—è¿™é“é¢˜ç®€ç›´å°±æ˜¯<span class='highlight-word'>è’è°¬</span>ï¼ä»€ä¹ˆå«è¯¥ä¸è¯¥ï¼Ÿ",
                duration: 3000
            },
            { 
                speaker: 'r2', 
                text: "ä»å¤§æ•°æ®åˆ†ææ¥çœ‹ï¼Œ<span class='highlight-word'>99.8%</span>çš„æ‰“å·¥äººéƒ½æƒ³æ‹’ç»å·¥ä½œï¼",
                duration: 3500
            },
            { 
                speaker: 'b1', 
                text: "å“å“Ÿå–‚ï¼Œæ•°æ®æ˜¯å†·çš„ï¼Œ<span class='highlight-word'>äººå¿ƒ</span>æ˜¯çƒ­çš„å˜›~",
                duration: 3000
            },
            { 
                speaker: 'r3', 
                text: "å¯æ˜¯æˆ‘çš„å¿ƒ...<span class='highlight-word'>ç¢äº†</span>å•Šï¼æ¯å¤©åŠ ç­åˆ°å‡Œæ™¨ï¼Œè°å¿ƒç–¼æˆ‘ï¼Ÿ",
                duration: 4000
            },
            { 
                speaker: 'host', 
                text: "è¿™å°±æ˜¯æ‰€è°“çš„<span class='highlight-word'>èµ›åšå–æƒ¨</span>å—ï¼Ÿ",
                duration: 2500,
                action: 'muyu'
            },
            { 
                speaker: 'b3', 
                text: "ç—›è‹¦æ˜¯çµé­‚çš„<span class='highlight-word'>ç£¨åˆ€çŸ³</span>ï¼Œæ²¡æœ‰å·¥ä½œï¼Œä½ æ‹¿ä»€ä¹ˆå®šä¹‰å­˜åœ¨ï¼Ÿ",
                duration: 3500
            },
             { 
                type: 'KAIGANG', // è§¦å‘å¼€æ ç‰¹æ•ˆ
                duration: 2000
            },
            { 
                speaker: 'b2', 
                text: "åˆ«æ‰¯é‚£äº›è™šçš„ï¼ä¸å·¥ä½œä½ <span class='highlight-word'>åƒä»€ä¹ˆ</span>ï¼Ÿï¼",
                duration: 2500,
                kaigang: true
            },
            { 
                speaker: 'r1', 
                text: "åƒ<span class='highlight-word'>è½¯é¥­</span>è¡Œä¸è¡Œï¼Ÿï¼",
                duration: 2000,
                kaigang: true
            },
             { 
                speaker: 'b2', 
                text: "ä½ ä¹Ÿè¦æœ‰é‚£å¼ <span class='highlight-word'>è„¸</span>å•Šï¼",
                duration: 3000,
                kaigang: true
            }
        ];

        // --- ç»„ä»¶ï¼š3D æ–¹å—äºº ---
        const VoxelDebater = ({ data, isSpeaking, action }) => {
            // è®¡ç®—ä½ç½®æ ·å¼
            const style = {
                bottom: data.bottom,
                zIndex: data.zIndex,
                transform: `scale(${data.scale})`, // è¿‘å¤§è¿œå°
            };
            if (data.left) style.left = data.left;
            if (data.right) style.right = data.right;

            // æ—‹è½¬æ–¹å‘ï¼šè¯´è¯æ—¶è½»å¾®è½¬å‘é•œå¤´
            const rotateDir = data.side === 'red' ? '10deg' : (data.side === 'blue' ? '-10deg' : '0deg');

            return (
                <div 
                    className={`voxel-debater ${data.side}-team ${isSpeaking ? 'speaking' : ''}`}
                    style={{...style, '--rotate-dir': rotateDir}}
                >
                    <div className="cube">
                        <div className="face face--front">{data.face}</div>
                        <div className="face face--back"></div>
                        <div className="face face--right"></div>
                        <div className="face face--left"></div>
                        <div className="face face--top"></div>
                        <div className="face face--bottom"></div>
                    </div>
                    
                    <div className="body-stand"></div>
                    <div className="name-tag">{data.name}</div>
                    
                    {/* è¯´è¯æ°”æ³¡ */}
                    {isSpeaking && (
                        <div className="absolute -top-16 left-1/2 transform -translate-x-1/2 text-4xl animate-bounce z-20">
                            {data.side === 'host' ? 'ğŸ¤' : 'ğŸ’¬'}
                        </div>
                    )}

                    {/* ä¸»æŒäººæ•²æœ¨é±¼ç‰¹æ•ˆ */}
                    {isSpeaking && action === 'muyu' && (
                        <div className="muyu-effect">ğŸŸ</div>
                    )}
                </div>
            );
        };

        // --- ä¸»ç¨‹åº ---
        const App = () => {
            const [currentLineIndex, setCurrentLineIndex] = useState(-1);
            const [isPlaying, setIsPlaying] = useState(false);
            const [kaigangMode, setKaigangMode] = useState(false);
            const [votes, setVotes] = useState({ red: 50, blue: 50 });

            // è‡ªåŠ¨æ’­æ”¾é€»è¾‘
            useEffect(() => {
                if (!isPlaying) return;

                if (currentLineIndex >= SCRIPT.length) {
                    setIsPlaying(false);
                    return;
                }

                const line = SCRIPT[currentLineIndex];
                if (!line) return;

                // å¤„ç†ç‰¹æ•ˆæŒ‡ä»¤
                if (line.type === 'KAIGANG') {
                    setKaigangMode(true);
                    setVotes({ red: 65, blue: 35 });
                } 
                
                // æ¨¡æ‹Ÿç¥¨æ•°æ‘†åŠ¨
                if (line.speaker && line.speaker !== 'host') {
                    const randomShift = Math.floor(Math.random() * 10) - 5;
                    setVotes(prev => ({ 
                        red: Math.min(90, Math.max(10, prev.red + randomShift)),
                        blue: Math.min(90, Math.max(10, prev.blue - randomShift))
                    }));
                }

                const timer = setTimeout(() => {
                    setCurrentLineIndex(prev => prev + 1);
                }, line.duration);

                return () => clearTimeout(timer);
            }, [currentLineIndex, isPlaying]);

            const startDebate = () => {
                setCurrentLineIndex(0);
                setIsPlaying(true);
                setKaigangMode(false);
            };

            const currentLine = SCRIPT[currentLineIndex];
            const currentSpeakerId = currentLine?.speaker;
            const currentAction = currentLine?.action;

            return (
                <div className="w-screen h-screen flex flex-col relative overflow-hidden">
                    
                    {/* 1. é¡¶éƒ¨è¾©é¢˜æ  */}
                    <div className="absolute top-0 w-full z-40 bg-yellow-400 border-b-4 border-black p-4 shadow-xl flex justify-between items-center">
                        <div className="bg-black text-white font-bold px-3 py-1 transform -skew-x-12 border-2 border-white">
                            S7 E01
                        </div>
                        <h1 className="text-2xl md:text-3xl font-black text-black tracking-tighter uppercase transform -skew-x-12 truncate max-w-2xl">
                            è¾©é¢˜ï¼šAI åº”è¯¥æ‹¥æœ‰â€œæ‹’ç»å·¥ä½œâ€çš„æƒåˆ©å—ï¼Ÿ
                        </h1>
                        <button 
                            onClick={startDebate}
                            className="bg-black text-white px-6 py-2 font-bold hover:bg-gray-800 transition transform hover:scale-105 border-2 border-white"
                        >
                            {isPlaying ? 'è¾©è®ºä¸­...' : 'å¼€å§‹è¾©è®º â–¶'}
                        </button>
                    </div>

                    {/* 2. ç¥¨æ•°å¯¹æŠ—æ¡ */}
                    <div className="absolute top-24 w-full flex justify-center z-30">
                        <div className="battle-bar-container">
                            <div className="bar-red" style={{ width: `${votes.red}%` }}>{votes.red}</div>
                            <div className="lightning-split"></div>
                            <div className="bar-blue">{votes.blue}</div>
                        </div>
                    </div>

                    {/* 3. 3D èˆå°åŒºåŸŸ */}
                    <div className={`scene-3d ${kaigangMode ? 'kaigang-mode' : ''}`}>
                        {/* åœ°æ¿ç½‘æ ¼ */}
                        <div className="absolute bottom-0 w-full h-1/2 bg-gray-800" 
                             style={{ 
                                 background: 'repeating-linear-gradient(45deg, #222 0, #222 20px, #333 20px, #333 40px)',
                                 transform: 'rotateX(60deg) scale(2)',
                                 transformOrigin: 'bottom'
                             }}>
                        </div>
                        
                        {/* èˆå°é¡¶å…‰ (è£…é¥°) */}
                        <div className="absolute top-0 left-1/4 w-1/2 h-full bg-gradient-to-b from-white to-transparent opacity-10 pointer-events-none transform -skew-x-12"></div>

                        {/* è¾©æ‰‹æ¸²æŸ“ */}
                        {DEBATERS.map(d => (
                            <VoxelDebater 
                                key={d.id} 
                                data={d} 
                                isSpeaking={currentSpeakerId === d.id}
                                action={currentAction}
                            />
                        ))}
                    </div>

                    {/* 4. å­—å¹•å±‚ (è§†è§‰æ ¸å¿ƒ) */}
                    <div className="absolute bottom-10 w-full flex justify-center z-50 pointer-events-none px-4 md:px-10">
                         {currentLine && currentLine.text && (
                            <div 
                                key={currentLineIndex}
                                className="qipa-subtitle active"
                                dangerouslySetInnerHTML={{ __html: currentLine.text }}
                            >
                            </div>
                        )}
                    </div>

                    {/* 5. å¼€æ å…¨å±ç‰¹æ•ˆ */}
                    {kaigangMode && currentLine?.type === 'KAIGANG' && (
                        <div className="kaigang-overlay">
                            <div className="kaigang-text">å¼€ æ </div>
                        </div>
                    )}
                    
                    {/* è£…é¥°ï¼šä¸¤ä¾§è§‚ä¼—å¸­å‰ªå½± */}
                    <div className="absolute bottom-0 left-0 w-32 h-64 bg-black opacity-50 rounded-tr-full z-10 blur-sm"></div>
                    <div className="absolute bottom-0 right-0 w-32 h-64 bg-black opacity-50 rounded-tl-full z-10 blur-sm"></div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>